const IS_PRODUCTION="undefined"!=typeof process&&"production"===process.env?.NODE_ENV,IS_BROWSER="undefined"!=typeof window;let CONFIG={mode:IS_PRODUCTION?"production":"development",performance:{maxUpdatesPerSecond:100,debounceDelay:16,batchDelay:0,enableProfiling:!IS_PRODUCTION,enableConcurrentMode:!0,workUnitTimeSlice:5},debug:{enabled:!IS_PRODUCTION,logRenders:!1,trackComponentTree:!0,warnOnSlowRenders:!0,slowRenderThreshold:16,captureStackTraces:!0},features:{strictMode:!0,suspense:!0,portals:!0,concurrentMode:!1}};function configure(e){CONFIG={...CONFIG,...e},DEBUG_MODE=CONFIG.debug.enabled}let DEBUG_MODE=CONFIG.debug.enabled;const performanceMetrics={renderCount:0,totalRenderTime:0,averageRenderTime:0,slowRenders:[],componentRenderTimes:new Map,updatesByPriority:{high:0,normal:0,low:0},droppedFrames:0,lastFrameTime:0,recordRender(e,t,n="normal"){this.renderCount++,this.totalRenderTime+=e,this.averageRenderTime=this.totalRenderTime/this.renderCount,this.updatesByPriority[n]++;const o=performance.now();if(this.lastFrameTime&&o-this.lastFrameTime>16&&this.droppedFrames++,this.lastFrameTime=o,t){this.componentRenderTimes.has(t)||this.componentRenderTimes.set(t,{count:0,totalTime:0,avgTime:0,minTime:1/0,maxTime:0});const n=this.componentRenderTimes.get(t);n.count++,n.totalTime+=e,n.avgTime=n.totalTime/n.count,n.minTime=Math.min(n.minTime,e),n.maxTime=Math.max(n.maxTime,e)}e>CONFIG.debug.slowRenderThreshold&&(this.slowRenders.push({duration:e,componentName:t,priority:n,timestamp:Date.now(),stack:CONFIG.debug.captureStackTraces?(new Error).stack:null}),CONFIG.debug.warnOnSlowRenders&&console.warn(`⚠️ Slow render detected: ${e.toFixed(2)}ms in ${t||"Unknown"}`)),this.slowRenders.length>100&&this.slowRenders.shift()},getReport(){return{totalRenders:this.renderCount,averageRenderTime:this.averageRenderTime.toFixed(2)+"ms",slowRenders:this.slowRenders.length,droppedFrames:this.droppedFrames,updatesByPriority:{...this.updatesByPriority},componentStats:Array.from(this.componentRenderTimes.entries()).map((([e,t])=>({component:e,renders:t.count,avgTime:t.avgTime.toFixed(2)+"ms",minTime:t.minTime.toFixed(2)+"ms",maxTime:t.maxTime.toFixed(2)+"ms"}))).sort(((e,t)=>parseFloat(t.avgTime)-parseFloat(e.avgTime)))}},reset(){this.renderCount=0,this.totalRenderTime=0,this.averageRenderTime=0,this.slowRenders=[],this.componentRenderTimes.clear(),this.updatesByPriority={high:0,normal:0,low:0},this.droppedFrames=0,this.lastFrameTime=0}},PropTypes={string:e=>"string"==typeof e,number:e=>"number"==typeof e,bool:e=>"boolean"==typeof e,func:e=>"function"==typeof e,array:e=>Array.isArray(e),object:e=>"object"==typeof e&&null!==e,node:e=>null==e||"string"==typeof e||"number"==typeof e||e.type,element:e=>e&&e.type,any:()=>!0,arrayOf:e=>t=>Array.isArray(t)&&t.every(e),objectOf:e=>t=>"object"==typeof t&&null!==t&&Object.values(t).every(e),oneOf:e=>t=>e.includes(t),oneOfType:e=>t=>e.some((e=>e(t))),shape:e=>t=>"object"==typeof t&&null!==t&&Object.keys(e).every((n=>e[n](t[n]))),required:e=>{const t=t=>null!=t&&e(t);return t.isRequired=!0,t}};function validateProps(e,t){if(!e.propTypes||!DEBUG_MODE)return;const n=e.name||"Component";Object.keys(e.propTypes).forEach((o=>{const r=e.propTypes[o],s=t[o];r.isRequired&&null==s?console.error(`❌ Required prop '${o}' was not specified in '${n}'.`):null==s||r(s)||console.error(`❌ Invalid prop '${o}' of value '${s}' supplied to '${n}'.`)}))}class ComponentStack{constructor(){this.stack=[]}push(e,t,n){this.stack.push({component:e,props:DEBUG_MODE?{...t}:null,name:e.name||"Anonymous",location:n,timestamp:Date.now()})}pop(){return this.stack.pop()}peek(){return this.stack[this.stack.length-1]}capture(){return this.stack.map((e=>({name:e.name,props:e.props,duration:Date.now()-e.timestamp})))}toString(){return this.stack.map((e=>`  at ${e.name}`)).join("\n")}clear(){this.stack=[]}}const componentStack=new ComponentStack;let root=null,component=null,rootVersion=0;class HookNode{constructor(e,t){this.type=e,this.value=t,this.next=null,this.dependencies=null,this.cleanup=null}}class HookList{constructor(){this.head=null,this.current=null}reset(){this.current=this.head}next(e,t){if(!this.current){const n=new HookNode(e,t);if(this.head){let e=this.head;for(;e.next;)e=e.next;e.next=n}else this.head=n;return this.current=n,n}DEBUG_MODE&&this.current.type!==e&&console.error(`Hook type mismatch! Expected ${this.current.type}, got ${e}`);const n=this.current;return this.current=this.current.next,n}cleanup(){let e=this.head;for(;e;){if(e.cleanup)try{e.cleanup()}catch(e){DEBUG_MODE&&console.error("Error in hook cleanup:",e)}e=e.next}}}const componentHooks=new Map,componentIds=new WeakMap,componentNames=new WeakMap,componentInstances=new Map;let nextComponentId=0;class WorkUnit{constructor(e,t,n,o,r){this.type=e,this.component=t,this.props=n,this.parent=o,this.key=r,this.priority="normal",this.child=null,this.sibling=null,this.alternate=null,this.effectTag=null,this.startTime=0,this.expirationTime=0}}let workInProgress=null,currentRoot=null,nextUnitOfWork=null,deletions=[];class PriorityQueue{constructor(){this.high=[],this.normal=[],this.low=[]}enqueue(e,t="normal"){e.priority=t,e.enqueueTime=performance.now(),this[t].push(e)}dequeue(){return this.high.length>0?this.high.shift():this.normal.length>0?this.normal.shift():this.low.length>0?this.low.shift():null}peek(){return this.high.length>0?this.high[0]:this.normal.length>0?this.normal[0]:this.low.length>0?this.low[0]:null}isEmpty(){return 0===this.high.length&&0===this.normal.length&&0===this.low.length}clear(){this.high=[],this.normal=[],this.low=[]}size(){return this.high.length+this.normal.length+this.low.length}}const workQueue=new PriorityQueue;let activeComponentIds=new Set,currentInstanceKey=null,isInRender=!1,hookCallOrder=[],currentHookList=null;class ContextFrame{constructor(e,t){this.id=e,this.value=t,this.subscribers=new Set}}class ContextStack{constructor(){this.frames=[],this.cache=new Map}push(e,t){const n=new ContextFrame(e,t);this.frames.push(n),this.cache.set(e,n)}pop(e){for(let t=this.frames.length-1;t>=0;t--)if(this.frames[t].id===e)return this.frames.splice(t,1),void this.rebuildCache()}get(e){for(let t=this.frames.length-1;t>=0;t--)if(this.frames[t].id===e)return this.frames[t];return null}rebuildCache(){this.cache.clear();for(let e=this.frames.length-1;e>=0;e--){const t=this.frames[e];this.cache.has(t.id)||this.cache.set(t.id,t)}}clear(){this.frames=[],this.cache.clear()}}const contextStack=new ContextStack;let nextContextId=0,oldVTree=null;const domNodeMap=new WeakMap,vnodeToDom=new WeakMap,domToVnode=new WeakMap;let updateScheduled=!1,batchedUpdates=new Set;const BATCH_DELAY=CONFIG.performance.batchDelay;let currentBatchPriority="normal";const MAX_UPDATES_PER_SECOND=CONFIG.performance.maxUpdatesPerSecond;let updateCount=0,lastResetTime=Date.now(),renderVersion=0,debounceTimer=null;const DEBOUNCE_DELAY=CONFIG.performance.debounceDelay,delegatedEvents=new Set(["click","dblclick","input","change","submit","keydown","keyup","keypress","focus","blur","mousedown","mouseup","mousemove","mouseenter","mouseleave","touchstart","touchend","touchmove","scroll","resize"]);let eventDelegationInitialized=!1;const globalEventListeners=new Map;function initEventDelegation(){!eventDelegationInitialized&&IS_BROWSER&&(delegatedEvents.forEach((e=>{const t=t=>{let n=t.target;for(;n&&n!==document&&!(n.__listeners&&n.__listeners[e]&&(n.__listeners[e](t),t.cancelBubble));)n=n.parentNode},n="scroll"===e||"resize"===e?{passive:!0,capture:!0}:{capture:!0};document.addEventListener(e,t,n),globalEventListeners.set(e,{handler:t,options:n})})),eventDelegationInitialized=!0)}function cleanupEventDelegation(){IS_BROWSER&&(globalEventListeners.forEach((({handler:e,options:t},n)=>{document.removeEventListener(n,e,t)})),globalEventListeners.clear(),eventDelegationInitialized=!1)}const elementListeners=new WeakMap,cleanupRegistry=IS_BROWSER&&"undefined"!=typeof FinalizationRegistry?new FinalizationRegistry((e=>{DEBUG_MODE&&console.log("🧹 Cleaning up garbage collected component:",e),cleanupComponent(e)})):null;function trackElementListener(e,t,n){elementListeners.has(e)||elementListeners.set(e,new Map);elementListeners.get(e).set(t,n)}function cleanupDOMElement(e){e&&(e.__listeners&&(Object.keys(e.__listeners).forEach((t=>{delete e.__listeners[t]})),delete e.__listeners),elementListeners.delete(e),Array.from(e.children||[]).forEach(cleanupDOMElement))}class MyReactError extends Error{constructor(e,t,n){super(e),this.name="MyReactError",this.component=t,this.componentStack=n,this.timestamp=Date.now()}toString(){let e=`${this.name}: ${this.message}`;return this.componentStack&&(e+="\n\nComponent Stack:\n"+this.componentStack),e}}let errorBoundaryStack=[];function captureError(e,t){const n=t?.name||"Unknown",o=componentStack.capture(),r=componentStack.toString();DEBUG_MODE&&(console.error(`❌ Error in component ${n}:`,e),console.error("Component Stack:",r));for(let t=errorBoundaryStack.length-1;t>=0;t--){const s=errorBoundaryStack[t];if(s.onError)return s.onError(e,{componentName:n,componentStack:o,stackString:r}),!0}return!1}function getComponentId(e){return componentIds.has(e)||(componentIds.set(e,"comp_"+nextComponentId++),e.name&&componentNames.set(e,e.name)),componentIds.get(e)}function getComponentName(e){return componentNames.get(e)||e.name||"Anonymous"}function getInstanceKey(e,t,n,o){return`${e}_${t||"root"}_${n}_${o||"default"}`}function createContext(e){const t="context_"+nextContextId++,n={_id:t,_defaultValue:e,_subscribers:new Set,Provider:function({value:e,children:n}){const o=contextStack.get(t);return contextStack.push(t,e),useLayoutEffect((()=>(o&&!Object.is(o.value,e)&&scheduleUpdate((()=>update()),"high"),()=>{contextStack.pop(t)})),[e]),Array.isArray(n)?h("div",{},...n):n},Consumer:function({children:e}){const t=useContext(n);return"function"==typeof e?e(t):e}};return n}function useContext(e){if(validateHookCall("useContext"),!e||!e._id)throw new MyReactError("useContext must be called with a valid context object");const t=contextStack.get(e._id);return t?(currentInstanceKey&&t.subscribers.add(currentInstanceKey),t.value):e._defaultValue}function checkRenderLoop(){const e=Date.now();if(e-lastResetTime>1e3&&(updateCount=0,lastResetTime=e),updateCount++,updateCount>MAX_UPDATES_PER_SECOND){const e=new MyReactError("Infinite render loop detected. Check your useEffect dependencies.",null,componentStack.toString());throw console.error("🔄 Render loop detected! Too many updates per second."),e}}function scheduleUpdate(e,t="normal"){const n=++renderVersion;batchedUpdates.add((()=>{renderVersion!==n&&renderVersion!==n+batchedUpdates.size-1||e()})),currentBatchPriority=t,updateScheduled||(updateScheduled=!0,clearTimeout(debounceTimer),"high"===t?Promise.resolve().then(flushUpdates):debounceTimer=setTimeout((()=>{Promise.resolve().then(flushUpdates)}),BATCH_DELAY))}function flushUpdates(){if(0===batchedUpdates.size)return void(updateScheduled=!1);const e=performance.now();try{checkRenderLoop();const t=Array.from(batchedUpdates);batchedUpdates.clear(),updateScheduled=!1,t.forEach((e=>{try{e()}catch(e){if(!captureError(e))throw e}}));const n=performance.now()-e;performanceMetrics.recordRender(n,"BatchUpdate",currentBatchPriority)}catch(e){throw batchedUpdates.clear(),updateScheduled=!1,e}}function validateHookCall(e){if(!isInRender)throw new MyReactError(`${e} can only be called inside a component function`,null,componentStack.toString());CONFIG.features.strictMode&&DEBUG_MODE&&hookCallOrder.push(e)}function resetHookValidation(){hookCallOrder=[]}function useState(e){if(validateHookCall("useState"),!currentHookList)throw new MyReactError("useState called outside of component render");const t=currentHookList.next("state","function"==typeof e?e():e),n=componentInstances.get(currentInstanceKey);return[t.value,function(e){if(n._unmounted)return;const o="function"==typeof e?e(t.value):e;Object.is(t.value,o)||(t.value=o,scheduleUpdate((()=>update())))}]}function useReducer(e,t,n){if(validateHookCall("useReducer"),!currentHookList)throw new MyReactError("useReducer called outside of component render");const o=currentHookList.next("reducer",n?n(t):t),r=componentInstances.get(currentInstanceKey),s=componentStack.peek()?.component;return[o.value,function(t){if(!r._unmounted)try{const n=e(o.value,t);if(Object.is(o.value,n))return;o.value=n,scheduleUpdate((()=>update()))}catch(e){captureError(e,s)}}]}function useEffect(e,t){if(validateHookCall("useEffect"),!currentHookList)throw new MyReactError("useEffect called outside of component render");const n=currentHookList.next("effect",{callback:e,dependencies:t?[...t]:null,cleanup:null,isLayout:!1}),o=componentInstances.get(currentInstanceKey),r=componentStack.peek()?.component,s=shouldRunEffect(n,t);if(n.dependencies=t?[...t]:null,s){const t=setTimeout((()=>{if(!o._unmounted&&activeComponentIds.has(currentInstanceKey)){if(n.cleanup)try{n.cleanup()}catch(e){DEBUG_MODE&&console.error("Error in effect cleanup:",e),captureError(e,r)}try{const t=e();"function"==typeof t&&(n.cleanup=t)}catch(e){DEBUG_MODE&&console.error("Error in effect:",e),captureError(e,r)}}}),0);o._timeouts||(o._timeouts=[]),o._timeouts.push(t)}}function useLayoutEffect(e,t){if(validateHookCall("useLayoutEffect"),!currentHookList)throw new MyReactError("useLayoutEffect called outside of component render");const n=currentHookList.next("layoutEffect",{callback:e,dependencies:t?[...t]:null,cleanup:null,isLayout:!0}),o=componentInstances.get(currentInstanceKey),r=componentStack.peek()?.component,s=shouldRunEffect(n,t);if(n.dependencies=t?[...t]:null,s){if(o._unmounted||!activeComponentIds.has(currentInstanceKey))return;if(n.cleanup)try{n.cleanup()}catch(e){DEBUG_MODE&&console.error("Error in layout effect cleanup:",e),captureError(e,r)}try{const t=e();"function"==typeof t&&(n.cleanup=t)}catch(e){DEBUG_MODE&&console.error("Error in layout effect:",e),captureError(e,r)}}}function useMemo(e,t){if(validateHookCall("useMemo"),!currentHookList)throw new MyReactError("useMemo called outside of component render");const n=currentHookList.next("memo",{value:void 0,dependencies:null,factory:e}),o=componentStack.peek()?.component,r=!n.dependencies||!t||t.some(((e,t)=>!Object.is(e,n.dependencies[t])));if(r)try{n.value=e(),n.dependencies=t?[...t]:null}catch(e){throw captureError(e,o),e}return n.value}function useCallback(e,t){return validateHookCall("useCallback"),useMemo((()=>e),t)}function shouldRunEffect(e,t){return!e.dependencies||(!t||0!==t.length&&t.some(((t,n)=>!Object.is(t,e.dependencies[n]))))}function useRef(e){if(validateHookCall("useRef"),!currentHookList)throw new MyReactError("useRef called outside of component render");return currentHookList.next("ref",{current:e}).value}IS_BROWSER&&(window.addEventListener("error",(e=>{DEBUG_MODE&&console.error("🌐 Global error caught:",e.error)})),window.addEventListener("unhandledrejection",(e=>{DEBUG_MODE&&console.error("🌐 Unhandled promise rejection:",e.reason)})));const suspenseCache=new WeakMap,suspensePromises=new Map;class SuspenseResource{constructor(e,t){this.promise=e,this.key=t,this.status="pending",this.value=null,this.error=null,e.then((e=>{this.status="success",this.value=e})).catch((e=>{this.status="error",this.error=e}))}read(){switch(this.status){case"pending":throw this.promise;case"error":throw this.error;case"success":return this.value}}}function createResource(e,t){if(suspensePromises.has(t))return suspensePromises.get(t);const n=new SuspenseResource(e(),t);return suspensePromises.set(t,n),n}function Suspense({fallback:e,children:t}){const[n,o]=useState(null),[r,s]=useState(!1),a=useRef(!0);if(useEffect((()=>()=>{a.current=!1}),[]),n)throw n;try{const e="function"==typeof t?t():t;return r&&s(!1),e}catch(t){if(t instanceof Promise)return r||s(!0),t.then((()=>{a.current&&(s(!1),scheduleUpdate((()=>update()),"high"))})).catch((e=>{a.current&&o(e)})),e;throw t}}function lazy(e){let t=null,n=null,o=null;return function(r){if(o)throw o;if(t)return t(r);throw n||(n=e().then((e=>(t=e.default||e,t))).catch((e=>{throw o=e,e}))),n}}function createPortal(e,t){if(!(t&&t instanceof HTMLElement))throw new MyReactError("createPortal requires a valid DOM element");const n=useRef(`portal_${Math.random().toString(36).substr(2,9)}`),o=useRef(!1);return useLayoutEffect((()=>{o.current=!0;return(()=>{if(!o.current)return;const r=createDOMElement("function"==typeof e?createComponent(e)():normalizeChild(e));r.setAttribute("data-portal-id",n.current);const s=t.querySelector(`[data-portal-id="${n.current}"]`);s?t.replaceChild(r,s):t.appendChild(r)})(),()=>{o.current=!1;const e=t.querySelector(`[data-portal-id="${n.current}"]`);e&&(cleanupDOMElement(e),t.removeChild(e))}}),[e,t]),null}function onMount(e){useEffect((()=>{e()}),[])}function onUnmount(e){useEffect((()=>e),[])}function withErrorBoundary(e,t){return function(n){const[o,r]=useState(null),[s,a]=useState(null),c={onError:(e,t)=>{r(e),a(t)}};if(useLayoutEffect((()=>(errorBoundaryStack.push(c),()=>{const e=errorBoundaryStack.indexOf(c);-1!==e&&errorBoundaryStack.splice(e,1)})),[]),o)return t({error:o,errorInfo:s,resetError:()=>{r(null),a(null)}});try{return e(n)}catch(n){return r(n),a({componentName:e.name,componentStack:componentStack.capture()}),t({error:n,errorInfo:{componentName:e.name},resetError:()=>{r(null),a(null)}})}}}function createVNode(e,t,n){return{type:e,props:t||{},children:n||[],key:t?.key}}function createComponent(e,t,n=null,o=0){return function(...r){const s=CONFIG.performance.enableProfiling?performance.now():0,a=getInstanceKey(getComponentId(e),n,o,t);if(!componentInstances.has(a)&&(componentInstances.set(a,{_unmounted:!1,_timeouts:[],_hookList:new HookList}),cleanupRegistry&&"undefined"!=typeof WeakRef)){const e=new WeakRef(componentInstances.get(a));cleanupRegistry.register(e,a)}const c=componentInstances.get(a);c._hookList.reset(),activeComponentIds.add(a),componentStack.push(e,r[0],`${e.name}:${a}`);const i=currentInstanceKey,l=currentHookList;currentInstanceKey=a,currentHookList=c._hookList;const u=isInRender;let d;isInRender=!0,resetHookValidation();try{validateProps(e,r[0]),d=e(...r)}catch(t){if(!captureError(t,e))throw t;d=h("div",{className:"error-fallback"},"Error rendering component")}finally{if(currentInstanceKey=i,currentHookList=l,componentStack.pop(),isInRender=u,CONFIG.performance.enableProfiling){const t=performance.now()-s;performanceMetrics.recordRender(t,getComponentName(e))}}return d}}function h(e,t,...n){return createVNode(e,t,n.flat(1/0).filter((e=>null!=e&&!1!==e)).map((e=>normalizeChild(e))))}function normalizeChild(e){return"string"==typeof e||"number"==typeof e?createVNode("TEXT",{textContent:String(e)},[]):"function"==typeof e?createComponent(e)():e&&e.type?e:IS_BROWSER&&e instanceof Node?createVNode("DOM_NODE",{node:e},[]):createVNode("TEXT",{textContent:String(e)},[])}function createDOMElement(e){if("TEXT"===e.type){const t=document.createTextNode(e.props.textContent||"");return vnodeToDom.set(e,t),domToVnode.set(t,e),t}if("DOM_NODE"===e.type)return e.props.node;const t=document.createElement(e.type);vnodeToDom.set(e,t),domToVnode.set(t,e),updateProps(t,{},e.props);for(const n of e.children)t.appendChild(createDOMElement(n));return t}function updateProps(e,t,n){for(const o in t)if(!(o in n)&&"key"!==o)if(o.startsWith("on")){const t=o.slice(2).toLowerCase();delegatedEvents.has(t)?e.__listeners&&delete e.__listeners[t]:e[o.toLowerCase()]=null}else"className"===o?e.className="":"style"===o&&"object"==typeof t[o]?Object.keys(t[o]).forEach((t=>{e.style[t]=""})):"ref"===o?"function"==typeof t[o]?t[o](null):t[o]&&"object"==typeof t[o]&&(t[o].current=null):e.removeAttribute(o);for(const o in n)if("key"!==o&&t[o]!==n[o])if(o.startsWith("on")&&"function"==typeof n[o]){const t=o.slice(2).toLowerCase();delegatedEvents.has(t)?(e.__listeners||(e.__listeners={}),e.__listeners[t]=n[o],trackElementListener(e,t,n[o])):e[o.toLowerCase()]=n[o]}else"className"===o?e.className=n[o]:"style"===o?"object"==typeof n[o]?Object.assign(e.style,n[o]):e.style.cssText=n[o]:"ref"===o?"function"==typeof n[o]?n[o](e):n[o]&&"object"==typeof n[o]&&(n[o].current=e):"dangerouslySetInnerHTML"===o?e.innerHTML=n[o].__html:o in e&&"list"!==o?e[o]=n[o]:e.setAttribute(o,n[o])}function diff(e,t,n,o=0){if(!t&&n){const t=createDOMElement(n);return e&&e.appendChild(t),t}if(t&&!n){const e=vnodeToDom.get(t);return e?.parentNode&&(cleanupDOMElement(e),e.parentNode.removeChild(e)),vnodeToDom.delete(t),null}if(t.type!==n.type){const e=vnodeToDom.get(t),o=createDOMElement(n);return e?.parentNode&&(cleanupDOMElement(e),e.parentNode.replaceChild(o,e)),vnodeToDom.delete(t),o}const r=vnodeToDom.get(t);return vnodeToDom.set(n,r),domToVnode.set(r,n),"TEXT"===n.type?(t.props.textContent!==n.props.textContent&&(r.textContent=n.props.textContent),r):("DOM_NODE"!==n.type&&updateProps(r,t.props,n.props),diffChildren(r,t.children||[],n.children||[]),r)}function diffChildren(e,t,n){const o=new Map,r=[];t.forEach(((e,t)=>{null!=e.key?o.set(e.key,{child:e,index:t,used:!1}):r.push({child:e,index:t,used:!1})}));let s=0;const a=[];n.forEach(((e,t)=>{let n=null,c=null;if(null!=e.key&&o.has(e.key)){const r=o.get(e.key);n=r.child,r.used=!0,c={type:"update",oldChild:n,newChild:e,newIndex:t,shouldMove:r.index!==t}}else if(null==e.key&&s<r.length){const o=r[s];n=o.child,o.used=!0,s++,c={type:"update",oldChild:n,newChild:e,newIndex:t,shouldMove:!1}}else c={type:"create",newChild:e,newIndex:t};a.push(c)})),a.forEach((t=>{if("update"===t.type){if(diff(e,t.oldChild,t.newChild,t.newIndex),t.shouldMove){const n=vnodeToDom.get(t.newChild),o=e.childNodes[t.newIndex]||null;n!==o&&e.insertBefore(n,o)}}else if("create"===t.type){const n=createDOMElement(t.newChild),o=e.childNodes[t.newIndex]||null;e.insertBefore(n,o)}})),o.forEach((({child:e,used:t})=>{if(!t){const t=vnodeToDom.get(e);t?.parentNode&&(cleanupDOMElement(t),t.parentNode.removeChild(t)),vnodeToDom.delete(e)}})),r.slice(s).forEach((({child:e})=>{const t=vnodeToDom.get(e);t?.parentNode&&(cleanupDOMElement(t),t.parentNode.removeChild(t)),vnodeToDom.delete(e)}))}function cleanupComponent(e){const t=componentInstances.get(e);t&&(t._unmounted=!0,t._timeouts&&(t._timeouts.forEach((e=>clearTimeout(e))),t._timeouts=[]),t._hookList&&t._hookList.cleanup(),componentHooks.delete(e),componentInstances.delete(e),DEBUG_MODE&&console.log("🧹 Component cleaned up:",e))}function update(){if(!root||!component)return;const e=CONFIG.performance.enableProfiling?performance.now():0;try{const t=new Set(activeComponentIds);activeComponentIds.clear(),componentStack.clear(),contextStack.clear();const n=createComponent(component)();if(oldVTree)diff(root,oldVTree,n);else{root.innerHTML="";const e=createDOMElement(n);e&&root.appendChild(e)}oldVTree=n;for(const e of t)activeComponentIds.has(e)||cleanupComponent(e);if(CONFIG.performance.enableProfiling){const t=performance.now()-e;performanceMetrics.recordRender(t,"Root")}}catch(e){if(console.error("❌ Error during update:",e),!captureError(e))throw e}}function render(e){component=e,activeComponentIds.clear(),contextStack.clear();try{const t=createComponent(e)(),n=createDOMElement(t);n&&root.appendChild(n),oldVTree=t}catch(e){if(console.error("❌ Error during initial render:",e),!captureError(e))throw e}}function createRoot(e){if(!(e&&e instanceof HTMLElement))throw new MyReactError("createRoot requires a valid DOM element");initEventDelegation();return{_container:e,_version:++rootVersion,render(t){root=e,component=t,activeComponentIds.clear(),contextStack.clear();try{e.innerHTML="";const n=createComponent(t)(),o=createDOMElement(n);o&&e.appendChild(o),oldVTree=n}catch(e){if(console.error("❌ Error during render:",e),!captureError(e))throw e}},unmount(){root&&(activeComponentIds.forEach((e=>cleanupComponent(e))),cleanupDOMElement(e),e.innerHTML="",root=null,component=null,oldVTree=null,activeComponentIds.clear(),contextStack.clear(),componentHooks.clear(),componentInstances.clear())}}}function hydrateRoot(e,t){if(!(e&&e instanceof HTMLElement))throw new MyReactError("hydrateRoot requires a valid DOM element");initEventDelegation(),root=e,component=t,activeComponentIds.clear(),contextStack.clear();try{e.firstChild&&(oldVTree=buildVTreeFromDOM(e.firstChild));const n=createComponent(t)();if(oldVTree)diff(e,oldVTree,n);else{const t=createDOMElement(n);t&&e.appendChild(t)}return oldVTree=n,{unmount(){activeComponentIds.forEach((e=>cleanupComponent(e))),cleanupDOMElement(e),e.innerHTML="",root=null,component=null,oldVTree=null}}}catch(e){if(console.error("❌ Error during hydration:",e),!captureError(e))throw e}}function buildVTreeFromDOM(e){if(e.nodeType===Node.TEXT_NODE)return createVNode("TEXT",{textContent:e.textContent},[]);if(e.nodeType!==Node.ELEMENT_NODE)return null;const t={};Array.from(e.attributes||[]).forEach((e=>{"class"===e.name?t.className=e.value:t[e.name]=e.value}));const n=Array.from(e.childNodes).map(buildVTreeFromDOM).filter(Boolean),o=createVNode(e.tagName.toLowerCase(),t,n);return vnodeToDom.set(o,e),domToVnode.set(e,o),o}const devTools={version:"3.0.0",renderers:new Map,componentTree:null,isConnected:!1,init(){IS_BROWSER&&DEBUG_MODE&&(window.__MYREACT_DEVTOOLS__=this,this.isConnected=!0,window.addEventListener("message",(e=>{"myreact-devtools"===e.data?.source&&this.handleDevToolsMessage(e.data)})),this.sendMessage("INIT",{version:this.version}),DEBUG_MODE&&console.log("🔧 MyReact DevTools initialized"))},sendMessage(e,t){this.isConnected&&window.postMessage({source:"myreact-devtools-response",type:e,data:t,timestamp:Date.now()},"*")},handleDevToolsMessage(e){switch(e.type){case"GET_COMPONENT_TREE":this.sendComponentTree();break;case"GET_PERFORMANCE":this.sendPerformanceData();break;case"INSPECT_COMPONENT":this.inspectComponent(e.instanceKey);break;case"HIGHLIGHT_COMPONENT":this.highlightComponent(e.instanceKey);break;case"FORCE_UPDATE":this.forceComponentUpdate(e.instanceKey)}},sendComponentTree(){const e=this.buildComponentTree();this.sendMessage("COMPONENT_TREE",e)},sendPerformanceData(){this.sendMessage("PERFORMANCE_DATA",performanceMetrics.getReport())},buildComponentTree(){const e=[];return componentInstances.forEach(((t,n)=>{const o=[];let r=t._hookList?.head;for(;r;)o.push({type:r.type,hasDependencies:null!=r.dependencies,hasCleanup:null!=r.cleanup}),r=r.next;e.push({key:n,unmounted:t._unmounted,hookCount:o.length,hooks:o,timeouts:t._timeouts?.length||0})})),e},inspectComponent(e){const t=componentInstances.get(e);if(!t)return void this.sendMessage("COMPONENT_NOT_FOUND",{instanceKey:e});const n=[];let o=t._hookList?.head;for(;o;)n.push({type:o.type,value:this.serializeValue(o.value),dependencies:o.dependencies,hasCleanup:!!o.cleanup}),o=o.next;this.sendMessage("COMPONENT_DETAILS",{instanceKey:e,unmounted:t._unmounted,hooks:n,timeouts:t._timeouts?.length||0})},serializeValue(e){if(null==e)return e;if("function"==typeof e)return"[Function]";if("symbol"==typeof e)return e.toString();if("object"==typeof e)try{return JSON.parse(JSON.stringify(e))}catch{return"[Circular or Complex Object]"}return e},highlightComponent(e){DEBUG_MODE&&console.log("🎯 Highlighting component:",e)},forceComponentUpdate(e){componentInstances.has(e)&&(scheduleUpdate((()=>update()),"high"),DEBUG_MODE&&console.log("🔄 Forcing update for:",e))},disconnect(){this.isConnected=!1,DEBUG_MODE&&console.log("🔌 MyReact DevTools disconnected")}};IS_BROWSER&&DEBUG_MODE&&devTools.init();const HTML_TAGS=["html","head","title","base","link","meta","style","body","header","nav","main","section","article","aside","footer","h1","h2","h3","h4","h5","h6","hgroup","p","hr","pre","blockquote","ol","ul","li","dl","dt","dd","figure","figcaption","div","a","em","strong","small","s","cite","q","dfn","abbr","data","time","code","samp","kbd","sub","sup","i","b","u","mark","ruby","rt","rp","bdi","bdo","span","br","wbr","img","audio","video","track","map","area","picture","embed","object","param","iframe","source","script","noscript","canvas","template","slot","del","ins","table","caption","colgroup","col","thead","tbody","tfoot","tr","th","td","form","fieldset","legend","label","input","button","select","datalist","optgroup","option","textarea","output","details","summary","dialog","menu","menuitem","svg","path","circle","rect","line","polyline","polygon","ellipse","g","text","tspan","defs","use","symbol"],elements={};HTML_TAGS.forEach((e=>{elements[e]=(...t)=>{let n={},o=t;return t.length>0&&null!=t[0]&&"object"==typeof t[0]&&!Array.isArray(t[0])&&!(IS_BROWSER&&t[0]instanceof Node)&&!t[0].type&&(n=t[0],o=t.slice(1)),h(e,n,...o.flat())}}));const{html:html,head:head,title:title,base:base,link:link,meta:meta,style:style,body:body,header:header,nav:nav,main:main,section:section,article:article,aside:aside,footer:footer,h1:h1,h2:h2,h3:h3,h4:h4,h5:h5,h6:h6,hgroup:hgroup,p:p,hr:hr,pre:pre,blockquote:blockquote,ol:ol,ul:ul,li:li,dl:dl,dt:dt,dd:dd,figure:figure,figcaption:figcaption,div:div,a:a,em:em,strong:strong,small:small,s:s,cite:cite,q:q,dfn:dfn,abbr:abbr,data:data,time:time,code:code,samp:samp,kbd:kbd,sub:sub,sup:sup,i:i,b:b,u:u,mark:mark,ruby:ruby,rt:rt,rp:rp,bdi:bdi,bdo:bdo,span:span,br:br,wbr:wbr,img:img,audio:audio,video:video,track:track,map:map,area:area,picture:picture,embed:embed,object:object,param:param,iframe:iframe,source:source,script:script,noscript:noscript,canvas:canvas,template:template,slot:slot,del:del,ins:ins,table:table,caption:caption,colgroup:colgroup,col:col,thead:thead,tbody:tbody,tfoot:tfoot,tr:tr,th:th,td:td,form:form,fieldset:fieldset,legend:legend,label:label,input:input,button:button,select:select,datalist:datalist,optgroup:optgroup,option:option,textarea:textarea,output:output,details:details,summary:summary,dialog:dialog,menu:menu,menuitem:menuitem,svg:svg,path:path}=elements;function Fragment({children:e}){return e}function memo(e,t){const n=function(n){const o=useRef(null),r=useRef(null);return(!o.current||(t?!t(o.current,n):!shallowEqual(o.current,n)))&&(o.current=n,r.current=e(n)),r.current};return n.displayName=`Memo(${e.displayName||e.name})`,n}function shallowEqual(e,t){if(e===t)return!0;if("object"!=typeof e||"object"!=typeof t)return!1;if(null===e||null===t)return!1;const n=Object.keys(e),o=Object.keys(t);return n.length===o.length&&n.every((n=>e[n]===t[n]))}function forceUpdate(){scheduleUpdate((()=>update()),"high")}function unmountComponentAtNode(e){return!!e&&(cleanupDOMElement(e),e.innerHTML="",activeComponentIds.forEach((e=>cleanupComponent(e))),activeComponentIds.clear(),root===e&&(root=null,component=null,oldVTree=null),!0)}function useImperativeHandle(e,t,n){validateHookCall("useImperativeHandle"),useLayoutEffect((()=>"function"==typeof e?(e(t()),()=>e(null)):e&&"object"==typeof e?(e.current=t(),()=>{e.current=null}):void 0),n)}function useDebugValue(e,t){if(validateHookCall("useDebugValue"),!DEBUG_MODE)return;const n=t?t(e):e;if(devTools&&devTools.isConnected){const e=componentStack.peek();e&&getComponentName(e.component);e._debugValues||(e._debugValues=[]),e._debugValues.push(n)}}let idCounter=0;function useId(){if(validateHookCall("useId"),!currentHookList)throw new MyReactError("useId called outside of component render");return currentHookList.next("id","myreact-"+ ++idCounter).value}function useTransition(){validateHookCall("useTransition");const[e,t]=useState(!1);return[e,useCallback((e=>{t(!0),scheduler.scheduleTask((()=>{try{e()}finally{t(!1)}}),"low")}),[])]}function useDeferredValue(e){validateHookCall("useDeferredValue");const[t,n]=useState(e);return useEffect((()=>{scheduler.scheduleTask((()=>{n(e)}),"low")}),[e]),t}function useSyncExternalStore(e,t,n){validateHookCall("useSyncExternalStore");const o=t(),[{inst:r},s]=useState({inst:{value:o,getSnapshot:t}});return useLayoutEffect((()=>{r.value=o,r.getSnapshot=t,checkIfSnapshotChanged(r)&&s({inst:r})}),[e,o,t]),useEffect((()=>{checkIfSnapshotChanged(r)&&s({inst:r});return e((()=>{checkIfSnapshotChanged(r)&&s({inst:r})}))}),[e]),o}function checkIfSnapshotChanged(e){const t=e.getSnapshot,n=e.value;try{const e=t();return!Object.is(n,e)}catch(e){return!0}}function batchUpdates(e){const t=updateScheduled;try{e()}finally{!t&&batchedUpdates.size>0&&flushUpdates()}}function flushSync(e){const t=new Set(batchedUpdates);batchedUpdates.clear();try{e(),flushUpdates()}finally{t.forEach((e=>batchedUpdates.add(e)))}}function StrictMode({children:e}){if(!DEBUG_MODE||!CONFIG.features.strictMode)return e;const[t,n]=useState(0);if(useEffect((()=>{0===t&&n(1)}),[t]),t<1)try{"function"==typeof e&&e()}catch(e){console.warn("⚠️ StrictMode detected an issue:",e)}return e}function Profiler({id:e,onRender:t,children:n}){const o=useRef(Date.now()),r=useRef(0),s=useRef(0);return useLayoutEffect((()=>{r.current=performance.now()})),useEffect((()=>{const n=performance.now()-r.current,a=0===s.current?"mount":"update";s.current++,t&&t(e,a,n,{renderCount:s.current,mountTime:o.current})})),n}function cloneElement(e,t,...n){if(!e||!e.type)throw new MyReactError("cloneElement requires a valid element");const o={...e.props,...t},r=n.length>0?n:e.children;return createVNode(e.type,o,r)}function isValidElement(e){return"object"==typeof e&&null!==e&&void 0!==e.type}const Children={map(e,t){if(null==e)return e;return(Array.isArray(e)?e:[e]).map(((e,n)=>t(e,n)))},forEach(e,t){if(null==e)return;(Array.isArray(e)?e:[e]).forEach(((e,n)=>t(e,n)))},count:e=>null==e?0:Array.isArray(e)?e.length:1,only(e){if(!isValidElement(e))throw new MyReactError("Children.only expected to receive a single element");return e},toArray:e=>null==e?[]:Array.isArray(e)?e:[e]};function forwardRef(e){const t=function(t){const{ref:n,...o}=t;return e(o,n)};return t.displayName=`ForwardRef(${e.displayName||e.name})`,t}function createRef(){return{current:null}}function createErrorBoundary(e){return function({children:t,onError:n,onReset:o}){const[r,s]=useState(null),[a,c]=useState(null),[i,l]=useState(0),u={onError:(e,t)=>{s(e),c(t),l((e=>e+1)),n&&n(e,t)}};useLayoutEffect((()=>(errorBoundaryStack.push(u),()=>{const e=errorBoundaryStack.indexOf(u);-1!==e&&errorBoundaryStack.splice(e,1)})),[]);const d=useCallback((()=>{s(null),c(null),o&&o()}),[o]);if(r)return e({error:r,errorInfo:a,resetError:d,errorCount:i});try{return t}catch(t){return u.onError(t,{componentStack:componentStack.capture()}),e({error:t,errorInfo:{componentStack:componentStack.capture()},resetError:d,errorCount:i+1})}}}const devWarnings={warnedKeys:new Set,warnOnce(e,t){DEBUG_MODE&&!this.warnedKeys.has(e)&&(this.warnedKeys.add(e),console.warn(`⚠️ [MyReact Warning]: ${t}`))},checkKeyUsage(e){if(!DEBUG_MODE||!Array.isArray(e))return;const t=new Set;let n=!1;e.forEach(((o,r)=>{if(!o||!o.type)return;const s=o.key;null==s&&e.length>1?n||(this.warnOnce(`missing-keys-${r}`,'Each child in a list should have a unique "key" prop.'),n=!0):null!=s&&t.has(s)&&this.warnOnce(`duplicate-key-${s}`,`Encountered two children with the same key: "${s}". Keys should be unique.`),null!=s&&t.add(s)}))},checkPropTypes(e,t){DEBUG_MODE&&e.propTypes&&validateProps(e,t)},checkHookRules(){if(!CONFIG.features.strictMode||!DEBUG_MODE)return;const e=hookCallOrder.join(","),t=currentInstanceKey;if(this._hookOrders||(this._hookOrders=new Map),this._hookOrders.has(t)){this._hookOrders.get(t)!==e&&this.warnOnce(`hook-order-${t}`,"Hook call order changed between renders. This can lead to bugs.")}else this._hookOrders.set(t,e)}},TestUtils={act(e){const t=e();return t instanceof Promise?t.then((()=>(flushUpdates(),new Promise((e=>setTimeout(e,0)))))):(flushUpdates(),new Promise((e=>setTimeout(e,0))))},mockComponent(e,t){const n=function(n){const o=h("div",{"data-testid":e},n.children);return t?t(n):o};return n.displayName=e,n},findByTestId:(e,t)=>e.querySelector(`[data-testid="${t}"]`),findAllByTestId:(e,t)=>Array.from(e.querySelectorAll(`[data-testid="${t}"]`)),renderIntoDocument(e){const t=document.createElement("div");document.body.appendChild(t);const n=createRoot(t);return n.render(e),{container:t,root:n}},cleanup(e,t){e&&e.unmount(),t&&t.parentNode&&t.parentNode.removeChild(t)},fireEvent(e,t,n={}){const o=new Event(t,{bubbles:!0,cancelable:!0,...n});Object.assign(o,n),e.dispatchEvent(o)}};function renderToString(e){if(null==e||!1===e)return"";if("string"==typeof e||"number"==typeof e)return escapeHtml(String(e));if("TEXT"===e.type)return escapeHtml(e.props.textContent||"");if("function"==typeof e.type){return renderToString(e.type(e.props))}const{type:t,props:n,children:o}=e,r=Object.keys(n||{}).filter((e=>"key"!==e&&"ref"!==e&&"children"!==e&&"dangerouslySetInnerHTML"!==e)).map((e=>{if("className"===e)return`class="${escapeHtml(n[e])}"`;if("style"===e&&"object"==typeof n[e]){return`style="${Object.keys(n[e]).map((t=>`${kebabCase(t)}:${n[e][t]}`)).join(";")}"`}return e.startsWith("on")?"":"boolean"==typeof n[e]?n[e]?e:"":`${e}="${escapeHtml(String(n[e]))}"`})).filter(Boolean).join(" "),s=r?`<${t} ${r}>`:`<${t}>`;if(new Set(["area","base","br","col","embed","hr","img","input","link","meta","param","source","track","wbr"]).has(t))return s.replace(">"," />");let a="";return a=n?.dangerouslySetInnerHTML?n.dangerouslySetInnerHTML.__html:(o||[]).map((e=>renderToString(e))).join(""),`${s}${a}</${t}>`}function renderToStaticMarkup(e){return renderToString(e)}function escapeHtml(e){const t={"&":"&amp;","<":"&lt;",">":"&gt;",'"':"&quot;","'":"&#x27;"};return e.replace(/[&<>"']/g,(e=>t[e]))}function kebabCase(e){return e.replace(/[A-Z]/g,(e=>`-${e.toLowerCase()}`))}const scheduler={tasks:[],isScheduled:!1,deadline:null,currentPriority:"normal",scheduleTask(e,t="normal"){const n={callback:e,priority:t,timestamp:Date.now(),id:Math.random().toString(36)};workQueue.enqueue(n,t),this.isScheduled||(this.isScheduled=!0,this.scheduleWork())},scheduleWork(){"undefined"!=typeof requestIdleCallback?requestIdleCallback((e=>this.processTasks(e))):setTimeout((()=>this.processTasks({timeRemaining:()=>16,didTimeout:!1})),0)},processTasks(e){this.deadline=e;const t=performance.now();for(;!workQueue.isEmpty()&&e.timeRemaining()>1;){const e=workQueue.dequeue();if(!e)break;this.currentPriority=e.priority;try{e.callback()}catch(e){console.error("❌ Error in scheduled task:",e)}if(performance.now()-t>50)break}workQueue.isEmpty()?this.isScheduled=!1:this.scheduleWork()},getCurrentPriority(){return this.currentPriority},shouldYield(){return this.deadline&&this.deadline.timeRemaining()<=1}};IS_BROWSER&&!window.requestIdleCallback&&(window.requestIdleCallback=function(e){const t=Date.now();return setTimeout((()=>{e({didTimeout:!1,timeRemaining:()=>Math.max(0,50-(Date.now()-t))})}),1)},window.cancelIdleCallback=function(e){clearTimeout(e)});const MyReact={version:"3.0.0",createRoot:createRoot,hydrateRoot:hydrateRoot,render:render,h:h,Fragment:Fragment,StrictMode:StrictMode,Profiler:Profiler,useState:useState,useReducer:useReducer,useEffect:useEffect,useLayoutEffect:useLayoutEffect,useMemo:useMemo,useCallback:useCallback,useRef:useRef,useContext:useContext,useImperativeHandle:useImperativeHandle,useDebugValue:useDebugValue,useId:useId,useTransition:useTransition,useDeferredValue:useDeferredValue,useSyncExternalStore:useSyncExternalStore,createContext:createContext,createRef:createRef,forwardRef:forwardRef,cloneElement:cloneElement,isValidElement:isValidElement,Children:Children,onMount:onMount,onUnmount:onUnmount,withErrorBoundary:withErrorBoundary,createErrorBoundary:createErrorBoundary,memo:memo,Suspense:Suspense,lazy:lazy,createPortal:createPortal,createResource:createResource,batchUpdates:batchUpdates,flushSync:flushSync,forceUpdate:forceUpdate,unmountComponentAtNode:unmountComponentAtNode,PropTypes:PropTypes,configure:configure,DEBUG_MODE:DEBUG_MODE,setDebugMode:e=>{DEBUG_MODE=e,CONFIG.debug.enabled=e,e&&IS_BROWSER&&devTools.init()},getPerformanceReport:()=>performanceMetrics.getReport(),resetPerformanceMetrics:()=>performanceMetrics.reset(),__devtools:DEBUG_MODE?devTools:null,TestUtils:TestUtils,renderToString:renderToString,renderToStaticMarkup:renderToStaticMarkup,__scheduler:DEBUG_MODE?scheduler:void 0,__internals:DEBUG_MODE?{componentInstances:componentInstances,componentStack:componentStack,contextStack:contextStack,workQueue:workQueue,vnodeToDom:vnodeToDom,domToVnode:domToVnode}:void 0,...elements};IS_BROWSER&&(window.MyReact=MyReact,DEBUG_MODE&&(console.log("%c🚀 MyReact v3.0.0 Enhanced Edition loaded!","color: #61dafb; font-size: 14px; font-weight: bold;"),console.log("%cDebug mode enabled. Access via window.MyReact","color: #888; font-size: 12px;"))),"undefined"!=typeof module&&module.exports&&(module.exports=MyReact),"function"==typeof define&&define.amd&&define([],(()=>MyReact)),"object"==typeof exports&&Object.assign(exports,MyReact);